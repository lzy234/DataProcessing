# Nexus æ•°æ®åº“ç»“æ„åˆ†ææŠ¥å‘Š

## æ¦‚è¿°

è¯¥é¡¹ç›®ä½¿ç”¨ **Payload CMS** ç®¡ç† 8 ä¸ªæ•°æ®é›†åˆï¼Œä¸»è¦ç”¨äºæ„å»º**æ”¿æ²»ç½‘ç»œå…³ç³»åˆ†æå¹³å°**ã€‚é›†åˆåˆ†ä¸ºä¸‰å¤§ç±»ï¼šæ ¸å¿ƒæ•°æ®ã€åˆ†ç±»ç³»ç»Ÿå’Œç³»ç»Ÿç®¡ç†ã€‚

---

## ğŸ“Š æ•°æ®è¡¨æ€»è§ˆ

| é›†åˆåç§° | Slug | ç±»å‹ | ç”¨é€” | å…³é”®å­—æ®µ |
|---------|------|------|------|---------|
| **People** | `people` | æ ¸å¿ƒæ•°æ® | æ”¿æ²»äººç‰©æ¡£æ¡ˆ | name, currentRole, party, organization |
| **Organizations** | `organizations` | æ ¸å¿ƒæ•°æ® | ç»„ç»‡æœºæ„ï¼ˆæ”¯æŒå±‚çº§ï¼‰ | name, parentOrganization, sector |
| **Connections** | `connections` | æ ¸å¿ƒæ•°æ® | äººç‰©/ç»„ç»‡å…³ç³»ç½‘ç»œ | source, target, description |
| **Parties** | `parties` | åˆ†ç±» | æ”¿å…šå‚è€ƒæ•°æ® | name, abbreviation, color |
| **Sectors** | `sectors` | åˆ†ç±» | è¡Œä¸šé¢†åŸŸåˆ†ç±» | name, category |
| **Tags** | `tags` | åˆ†ç±» | è‡ªå®šä¹‰æ ‡ç­¾ | name |
| **Users** | `users` | ç³»ç»Ÿ | ç®¡ç†å‘˜è´¦æˆ· | username |
| **Media** | `media` | ç³»ç»Ÿ | å›¾ç‰‡èµ„äº§ç®¡ç† | alt, caption |

---

## ğŸ“ æ ¸å¿ƒæ•°æ®è¡¨

### 1. Peopleï¼ˆäººç‰©è¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/People.ts`

**ç”¨é€”ï¼š** å­˜å‚¨æ”¿æ²»äººç‰©çš„è¯¦ç»†æ¡£æ¡ˆä¿¡æ¯

**ç•Œé¢ç»“æ„ï¼š** åˆ†ä¸º 3 ä¸ªæ ‡ç­¾é¡µ
- åŸºæœ¬ä¿¡æ¯ï¼ˆBasic Informationï¼‰
- è¯¦ç»†èµ„æ–™ï¼ˆDetailed Profileï¼‰
- å…³ç³»ç½‘ç»œï¼ˆRelationship Networkï¼‰

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `avatar` | Upload â†’ Media | å¦ | å¤´åƒç…§ç‰‡ |
| `name` | Text | âœ“ | è‹±æ–‡å§“å |
| `ChineseName` | Text | å¦ | ä¸­æ–‡å§“å |
| `dateOfBirth` | Date | å¦ | å‡ºç”Ÿæ—¥æœŸï¼ˆå‰ç«¯è‡ªåŠ¨è®¡ç®—å¹´é¾„ï¼‰ |
| `gender` | Select | å¦ | æ€§åˆ«ï¼ˆmale/female/otherï¼‰ |
| `currentRole` | Text | âœ“ | å½“å‰èŒä½ |
| `organization` | Relationship â†’ Organizations | å¦ | æ‰€å±ç»„ç»‡ï¼ˆå•é€‰ï¼‰ |
| `party` | Relationship â†’ Parties | å¦ | æ‰€å±æ”¿å…šï¼ˆå•é€‰ï¼‰ |
| `education` | Textarea | å¦ | æ•™è‚²èƒŒæ™¯ |
| `careerHistory` | Textarea | å¦ | èŒä¸šç»å† |
| `specialTags` | Relationship â†’ Tags | å¦ | ç‰¹æ®Šæ ‡ç­¾ï¼ˆå¤šé€‰ï¼‰ |
| `slug` | Text | è‡ªåŠ¨ | URLæ ‡è¯†ç¬¦ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ |
| `bio` | Textarea | å¦ | äººç‰©ä¼ è®° |
| `sources` | Array | å¦ | ä¿¡æ¯æ¥æºæ•°ç»„ |
| `relationshipVisualization` | UI | - | å…³ç³»å¯è§†åŒ–ç»„ä»¶ |

**sources æ•°ç»„å­å­—æ®µï¼š**
- `sourceName` (text) - æ¥æºåç§°
- `sourceUrl` (text) - æ¥æºé“¾æ¥
- `sourceDate` (date) - å‘å¸ƒæ—¥æœŸ
- `reliability` (select) - å¯é æ€§ï¼ˆhigh/medium/lowï¼‰

**è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼ˆHooksï¼‰ï¼š**
1. **é¢†åŸŸ â†’ èŒä½æ¨è**
   æ ¹æ®æ‰€å±ç»„ç»‡çš„ sector è‡ªåŠ¨æ¨è currentRole
   ä¾‹å¦‚ï¼šSenate â†’ Senator, Supreme Court â†’ Justice

2. **æ”¿å…š â†’ æ„è¯†å½¢æ€é»˜è®¤å€¼**
   æ ¹æ®æ”¿å…šè‡ªåŠ¨è®¾ç½®æ„è¯†å½¢æ€å…‰è°±å€¼
   - Democratic Party: -5ï¼ˆåå·¦ï¼‰
   - Republican Party: +5ï¼ˆåå³ï¼‰
   - Independent: 0ï¼ˆä¸­ç«‹ï¼‰

3. **ä»æ”¿å¹´é™ â†’ èµ„æ·±æ ‡ç­¾**
   è‹¥ä»æ”¿è¶…è¿‡ 20 å¹´ï¼Œè‡ªåŠ¨æ·»åŠ "èµ„æ·±æ”¿æ²»å®¶"æ ‡ç­¾

---

### 2. Organizationsï¼ˆç»„ç»‡è¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Organizations.ts`

**ç”¨é€”ï¼š** å­˜å‚¨æ”¿æ²»/æœºæ„ç»„ç»‡ï¼Œæ”¯æŒå±‚çº§å…³ç³»

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `name` | Text | âœ“ | ç»„ç»‡åç§° |
| `parentOrganization` | Relationship â†’ Organizations | å¦ | ä¸Šçº§ç»„ç»‡ï¼ˆè‡ªå¼•ç”¨ï¼‰ |
| `sector` | Relationship â†’ Sectors | âœ“ | æ‰€å±é¢†åŸŸ |
| `description` | Textarea | å¦ | ç»„ç»‡æè¿° |

**è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼ˆHooksï¼‰ï¼š**
- **ç»§æ‰¿ä¸Šçº§ sector**ï¼šè‹¥è®¾ç½®äº† parentOrganizationï¼Œå­ç»„ç»‡è‡ªåŠ¨ç»§æ‰¿çˆ¶ç»„ç»‡çš„ sector

**å±‚çº§ç¤ºä¾‹ï¼š**
```
Federal Government (sector: Government)
â”œâ”€â”€ Senate (sector: è‡ªåŠ¨ç»§æ‰¿ Government)
â”‚   â””â”€â”€ Senate Judiciary Committee (sector: è‡ªåŠ¨ç»§æ‰¿ Government)
â””â”€â”€ House of Representatives (sector: è‡ªåŠ¨ç»§æ‰¿ Government)
```

---

### 3. Connectionsï¼ˆå…³ç³»è¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Connections.ts`

**ç”¨é€”ï¼š** å®šä¹‰äººç‰©ä¸äººç‰©ã€äººç‰©ä¸ç»„ç»‡ã€ç»„ç»‡ä¸ç»„ç»‡ä¹‹é—´çš„å…³ç³»

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `source` | Polymorphic Relationship | âœ“ | å…³ç³»èµ·ç‚¹ï¼ˆå¯é€‰ People æˆ– Organizationsï¼‰ |
| `target` | Polymorphic Relationship | âœ“ | å…³ç³»ç»ˆç‚¹ï¼ˆå¯é€‰ People æˆ– Organizationsï¼‰ |
| `description` | Text | å¦ | å…³ç³»æè¿°ï¼ˆå¦‚"å‰åŒäº‹"ã€"æ”¿æ²»ç›Ÿå‹"ï¼‰ |

**å…³ç³»æ ¼å¼ï¼š** "A is [description] of B"

**ç¤ºä¾‹ï¼š**
- Person A â†’ "former colleague" â†’ Person B
- Person A â†’ "board member" â†’ Organization B
- Organization A â†’ "subsidiary" â†’ Organization B

---

## ğŸ·ï¸ åˆ†ç±»ç³»ç»Ÿè¡¨

### 4. Partiesï¼ˆæ”¿å…šè¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Parties.ts`

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `name` | Text | âœ“ | æ”¿å…šå…¨ç§° |
| `abbreviation` | Text | å¦ | ç¼©å†™ï¼ˆDEM, GOP, INDï¼‰ |
| `color` | Text | âœ“ | ä¸»é¢˜è‰²ï¼ˆåå…­è¿›åˆ¶ï¼Œç”¨äºå¯è§†åŒ–ï¼‰ |

**é¢„è®¾æ•°æ®ç¤ºä¾‹ï¼š**
- Democratic Party (DEM, #0015BC è“è‰²)
- Republican Party (GOP, #E81B23 çº¢è‰²)

---

### 5. Sectorsï¼ˆé¢†åŸŸè¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Sectors.ts`

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `name` | Text | âœ“ | é¢†åŸŸåç§°ï¼ˆå¦‚ Senate, Media, Techï¼‰ |
| `category` | Select | å¦ | åˆ†ç±»ï¼ˆgov=æ”¿åºœ/external=å¤–éƒ¨ï¼‰ |
| `description` | Text | å¦ | é¢†åŸŸæè¿° |

---

### 6. Tagsï¼ˆæ ‡ç­¾è¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Tags.ts`

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `name` | Text | âœ“ | æ ‡ç­¾åç§° |

**ç”¨é€”ç¤ºä¾‹ï¼š**
- "2028 Candidate"ï¼ˆ2028å€™é€‰äººï¼‰
- "MAGA"ï¼ˆç‰¹æœ—æ™®æ´¾ç³»ï¼‰
- "Never Trump"ï¼ˆåç‰¹æœ—æ™®ï¼‰
- "èµ„æ·±æ”¿æ²»å®¶"ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

---

## âš™ï¸ ç³»ç»Ÿç®¡ç†è¡¨

### 7. Usersï¼ˆç”¨æˆ·è¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Users/index.ts`

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `name` | Text | å¦ | ç”¨æˆ·å…¨å |
| `username` | Text | âœ“ | ç™»å½•ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ |

**ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨ç”¨æˆ·åç™»å½•ï¼ˆä¸ä½¿ç”¨é‚®ç®±ï¼‰
- æ‰€æœ‰æ“ä½œéœ€è¦è®¤è¯

---

### 8. Mediaï¼ˆåª’ä½“è¡¨ï¼‰
**æ–‡ä»¶ä½ç½®ï¼š** `src/collections/Media.ts`

**å­—æ®µå®šä¹‰ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `alt` | Text | å¦ | æ›¿ä»£æ–‡æœ¬ |
| `caption` | RichText | å¦ | å›¾ç‰‡è¯´æ˜ |

**å›¾ç‰‡å°ºå¯¸è‡ªåŠ¨ç”Ÿæˆï¼š**
- thumbnail (300px)
- square (500x500px)
- small (600px)
- medium (900px)
- large (1400px)
- xlarge (1920px)
- og (1200x630px, ç”¨äºç¤¾äº¤åª’ä½“åˆ†äº«)

**è®¿é—®æƒé™ï¼š**
- è¯»å–ï¼šå…¬å¼€
- åˆ›å»º/æ›´æ–°/åˆ é™¤ï¼šéœ€è®¤è¯

---

## ğŸ”— å…³ç³»å›¾è°±

```
Peopleï¼ˆäººç‰©ï¼‰
â”œâ”€â”€ å…³è” Organizationsï¼ˆä¸€å¯¹ä¸€ï¼Œvia "organization"ï¼‰
â”œâ”€â”€ å…³è” Partiesï¼ˆä¸€å¯¹ä¸€ï¼Œvia "party"ï¼‰
â”œâ”€â”€ å…³è” Tagsï¼ˆå¤šå¯¹å¤šï¼Œvia "specialTags"ï¼‰
â”œâ”€â”€ å…³è” Mediaï¼ˆä¸€å¯¹ä¸€ï¼Œvia "avatar"ï¼‰
â””â”€â”€ å…³è” Connectionsï¼ˆä½œä¸º source æˆ– targetï¼‰

Organizationsï¼ˆç»„ç»‡ï¼‰
â”œâ”€â”€ è‡ªå¼•ç”¨å±‚çº§ï¼ˆvia "parentOrganization"ï¼‰
â”œâ”€â”€ å…³è” Sectorsï¼ˆä¸€å¯¹ä¸€ï¼Œvia "sector"ï¼‰
â””â”€â”€ å…³è” Connectionsï¼ˆä½œä¸º source æˆ– targetï¼‰

Connectionsï¼ˆå…³ç³»ï¼‰
â”œâ”€â”€ å¤šæ€å…³ç³» source â†’ People æˆ– Organizations
â””â”€â”€ å¤šæ€å…³ç³» target â†’ People æˆ– Organizations
```

---

## ğŸ” æƒé™æ§åˆ¶ç­–ç•¥

**ä¸‰ç§è®¿é—®æ§åˆ¶æ¨¡å¼ï¼š**

1. **`anyone`** - å…¬å¼€è®¿é—®
   - å®ç°ï¼š`src/access/anyone.ts`
   - æ€»æ˜¯è¿”å› `true`
   - åº”ç”¨äºï¼šMedia è¯»å–æƒé™

2. **`authenticated`** - éœ€ç™»å½•
   - å®ç°ï¼š`src/access/authenticated.ts`
   - æ£€æŸ¥ `req.user` æ˜¯å¦å­˜åœ¨
   - åº”ç”¨äºï¼šMedia ä¿®æ”¹æƒé™ã€Users æ‰€æœ‰æ“ä½œ

3. **`authenticatedOrPublished`** - å·²ç™»å½•æˆ–å·²å‘å¸ƒ
   - å®ç°ï¼š`src/access/authenticatedOrPublished.ts`
   - å·²ç™»å½•ï¼šå…¨éƒ¨è®¿é—®
   - æœªç™»å½•ï¼šä»…è¯»å– `_status: 'published'` è®°å½•

---

## ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯

- **æ€»é›†åˆæ•°ï¼š** 8
- **æ ¸å¿ƒæ•°æ®é›†åˆï¼š** 3ï¼ˆPeople, Organizations, Connectionsï¼‰
- **åˆ†ç±»é›†åˆï¼š** 3ï¼ˆParties, Sectors, Tagsï¼‰
- **ç³»ç»Ÿé›†åˆï¼š** 2ï¼ˆUsers, Mediaï¼‰
- **æ€»å­—æ®µæ•°ï¼š** 40+
- **è‡ªåŠ¨åŒ– Hooksï¼š** 2 ä¸ªé›†åˆï¼ˆPeople, Organizationsï¼‰
- **å…³ç³»å®šä¹‰ï¼š** 8 ä¸ªï¼ˆå¤šæ€ + æ ‡å‡†ï¼‰

---

## ğŸ¯ è®¾è®¡ç‰¹ç‚¹

1. **å¤šæ€å…³ç³»è®¾è®¡**ï¼šConnections æ”¯æŒè¿æ¥ä¸åŒç±»å‹çš„å®ä½“
2. **å±‚çº§æ•°æ®æ¨¡å‹**ï¼šOrganizations æ”¯æŒæ— é™å±‚çº§åµŒå¥—
3. **è‡ªåŠ¨æ•°æ®ä¸°å¯Œ**ï¼šåŸºäºè§„åˆ™è‡ªåŠ¨æ¨èèŒä½ã€æ ‡ç­¾ã€æ„è¯†å½¢æ€å€¼
4. **ç»§æ‰¿æœºåˆ¶**ï¼šå­ç»„ç»‡è‡ªåŠ¨ç»§æ‰¿çˆ¶ç»„ç»‡çš„é¢†åŸŸåˆ†ç±»
5. **ç‰ˆæœ¬æ§åˆ¶**ï¼šPeople é›†åˆæ”¯æŒè‰ç¨¿åŠŸèƒ½
6. **å“åº”å¼å›¾ç‰‡**ï¼šMedia è‡ªåŠ¨ç”Ÿæˆ 7 ç§å°ºå¯¸

---

## ğŸ—‚ï¸ æŠ€æœ¯å®ç°ç»†èŠ‚

### é…ç½®æ–‡ä»¶ä½ç½®
- **ä¸»é…ç½®ï¼š** `src/payload.config.ts`
- **æ•°æ®åº“ï¼š** SQLite adapter
- **è¯­è¨€ï¼š** ä¸­æ–‡ï¼ˆzhï¼‰ä½œä¸ºåå¤‡è¯­è¨€
- **æ—¥æœŸæ ¼å¼ï¼š** "yyyyå¹´Mæœˆdæ—¥"ï¼ˆä¸­æ–‡ï¼‰
- **é»˜è®¤ç¼–è¾‘å™¨ï¼š** Lexicalï¼ˆå¯Œæ–‡æœ¬ï¼‰

### Hooks å®ç°
1. **People.beforeChange** (`src/collections/People.ts`)
   - èŒä½æ¨èæ˜ å°„è¡¨
   - æ”¿å…šæ„è¯†å½¢æ€æ˜ å°„
   - èµ„æ·±æ”¿æ²»å®¶æ ‡ç­¾è‡ªåŠ¨æ·»åŠ 

2. **Organizations.beforeChange** (`src/collections/Organizations.ts`)
   - çˆ¶ç»„ç»‡ sector ç»§æ‰¿é€»è¾‘

---

è¯¥æ•°æ®ç»“æ„è®¾è®¡ç”¨äºæ„å»º**æ”¿æ²»ç½‘ç»œå…³ç³»åˆ†æå¹³å°**ï¼Œå…·æœ‰å®Œå–„çš„å…³ç³»å»ºæ¨¡ã€è‡ªåŠ¨åŒ–æ•°æ®å¤„ç†å’Œç²¾ç»†çš„è®¿é—®æ§åˆ¶æœºåˆ¶ã€‚

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š2026-01-14*
*åˆ†æå·¥å…·ï¼šClaude Code*
